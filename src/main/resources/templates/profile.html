<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>User Profile</title>
    <link href='https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.10.2/fullcalendar.min.css' rel='stylesheet' />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <script src="https://kit.fontawesome.com/a036573af0.js" crossorigin="anonymous"></script>


    <style>
        .profile-container {
            background-color: #f2f2f2;
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            max-width: 600px;
            margin: 0 auto;
            text-align: center;
        }

        /* Profile heading */
        .profile-heading {
            font-size: 32px;
            margin-bottom: 20px;
            color: #333;
        }

        /* Profile image */
        .profile-img {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background-color: #fff;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }

        .profile-img i {
            color: #999;
            font-size: 5em;
        }

        /* Edit profile button */
        .edit-profile-btn {
            background-color: #007bff;
            color: #fff;
            border: none;
            border-radius: 5px;
            padding: 10px 20px;
            font-size: 16px;
            text-decoration: none;
            transition: background-color 0.3s ease;
        }

        .edit-profile-btn:hover {
            background-color: #0056b3;
        }

        /* Profile description */
        .description {
            font-size: 18px;
            color: #555;
            margin-bottom: 30px;
        }

        /* Create appointment form */
        .create-appointment-form {
            text-align: left;
            margin-bottom: 20px;
        }

        .create-appointment-form label {
            font-size: 16px;
            color: #333;
        }

        .create-appointment-form input[type="text"],
        .create-appointment-form input[type="date"] {
            width: 100%;
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #ccc;
            margin-bottom: 10px;
            font-size: 16px;
        }

        .create-appointment-form button {
            background-color: #007bff;
            color: #fff;
            border: none;
            border-radius: 5px;
            padding: 10px 20px;
            font-size: 16px;
            text-decoration: none;
            transition: background-color 0.3s ease;
        }

        .create-appointment-form button:hover {
            background-color: #0056b3;
        }
        #calendar {
            height:400px;
            width:400px;
        }
    </style>

</head>
<body class="bg-light">
<nav th:replace="~{partials/navbar :: navbar}"></nav>

<div th:if="${user.isMechanic}">
    <h1 class="profile-heading" th:text="'Hello, ' + ${user.first_name} + '! Welcome to your profile.'"></h1>
    <br>
    <br>
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-4">
                <div class="profileImg">
                    <i class="fas fa-5x fa-image"></i>
                </div>
                <a th:href="@{/profile/{id}/edit(id=${user.id})}" class="btn btn-primary">Edit Profile</a>
            </div>
            <div class="col-md-4">
                <div>
                    <h3 class="description" th:text="${user.description}"></h3>
                </div>
            </div>
            <div class="col-md-4">
                <div class="mt-5">
                    <form class="formStyle" th:action="@{/create-appointment}" th:method="POST">
                        <label for="title">Title:</label>
                        <input type="text" id="title" name="title" required>

                        <label for="date">Date:</label>
                        <input type="date" id="date" name="date" required>

                        <button type="submit" class="btn btn-primary">Create Appointment</button>
                    </form>
                </div>
                <div id="calendar" class="mt-5"></div>
            </div>
        </div>
    </div>
</div>





<!--//Regular User-->
<div th:if="${!user.isMechanic}">
    <h1>User Profile</h1>
    <p style="text-align: center">Welcome to your profile page!</p>
    <a th:href="@{/profile/{id}/edit(id=${user.id})}" class="btn btn-primary">Edit Profile</a>

</div>


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
        crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.10.2/fullcalendar.min.js"></script>
<script>



     $(document).ready(function() {
         $('#calendar').fullCalendar({
             defaultView: 'month',
             events: {
                 url: '/api/appointments',
                 method: 'GET'
             }
         });
     });


</script>
</body>
</html>
